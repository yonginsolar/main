<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="layer"><div style="cursor:pointer;position:absolute;right:0;top:0;width:40px;height:40px;background:#333;color:white;text-align:center;line-height:40px;font-weight:bold;" onclick="closeDaumPostcode()">Ã—</div></div>

    <div class="container">
      <div class="info-box">
        <div class="info-text">ì‹ ì²­ì„œ ì‘ì„± í›„ ì¶œìê¸ˆì„ ì…ê¸ˆí•˜ì‹œë©´ ê°€ì…ì´ ì™„ë£Œë©ë‹ˆë‹¤.</div>
        <div class="info-text">ì´í›„ ë°œì „ì†Œ ê±´ë¦½ ì‹œ ì¶œìê¸ˆì„ ì¦ì•¡í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
        <div class="contact-info">ë¬¸ì˜: ì‚¬ë¬´êµ­ì¥ ê¹€ë¯¼í˜¸ 010-2513-5736 / yonginsolar@gmail.com</div>
      </div>

      <form id="joinForm" onsubmit="handleFormSubmit(event, this)">
        <div class="type-selector">
          <label class="radio-label"><input type="radio" name="userType" value="ê°œì¸" checked onclick="toggleType('ê°œì¸')"> ê°œì¸</label>
          <label class="radio-label"><input type="radio" name="userType" value="ë‹¨ì²´" onclick="toggleType('ë‹¨ì²´')"> ë‹¨ì²´</label>
        </div>

        <div id="individualField">
          <div class="input-group"><label class="required">ì´ë¦„</label><input type="text" id="userName" name="userName" placeholder="ì‹¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required oninput="syncAccountHolder()"></div>
<div class="input-group"><label class="required">ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸</label>
  <div class="split-box">
    <input type="text" id="rrn1" name="rrn1" maxlength="6" placeholder="ì• 6ìë¦¬" style="flex:1;" 
           oninput="handleNumberOnly(this); autoMove(this, 'rrn2', 6); checkAgeLimit(); document.getElementById('rrnError').textContent='';" required>
    <span class="dash">-</span>
    <input type="password" id="rrn2" name="rrn2" maxlength="7" placeholder="ë’¤ 7ìë¦¬" style="flex:1;" 
           oninput="handleNumberOnly(this); checkAgeLimit(); document.getElementById('rrnError').textContent='';" 
           onblur="checkRRNOnBlur()" required>
  </div>
  <div id="rrnError" class="field-error"></div>
</div>
        </div>

        <div id="orgField" style="display:none;">
          <div class="input-group"><label class="required">ë‹¨ì²´ëª…</label><input type="text" id="orgName" name="orgName" placeholder="ì˜ˆ: (ì£¼)ìš©ì¸ì†”ë¼, OOì•„íŒŒíŠ¸ì…ì£¼ìëŒ€í‘œíšŒì˜" oninput="syncAccountHolder()"></div>
          <div class="input-group"><label class="required">ì‚¬ì—…ì(ê³ ìœ )ë²ˆí˜¸</label>
            <div class="split-box">
              <input type="text" id="biz1" maxlength="3" placeholder="3ìë¦¬" style="flex:1;" oninput="handleNumberOnly(this); autoMove(this, 'biz2', 3);">
              <span class="dash">-</span>
              <input type="text" id="biz2" maxlength="2" placeholder="2ìë¦¬" style="flex:1;" oninput="handleNumberOnly(this); autoMove(this, 'biz3', 2);">
              <span class="dash">-</span>
              <input type="text" id="biz3" maxlength="5" placeholder="5ìë¦¬" style="flex:2;" oninput="handleNumberOnly(this);" onblur="validateAndCheckBizNo()">
            </div>
            <div id="orgNoError" class="field-error"></div>
            <input type="hidden" id="orgNo" name="orgNo">
          </div>
        </div>

        <div class="input-group"><label class="required">ì—°ë½ì²˜</label>
          <div class="split-box">
            <input type="text" id="p1" maxlength="3" value="010" style="flex:1;" oninput="handleNumberOnly(this); autoMove(this, 'p2', 3)">
            <span class="dash">-</span>
            <input type="text" id="p2" maxlength="4" style="flex:1;" oninput="handleNumberOnly(this); autoMove(this, 'p3', 4)">
            <span class="dash">-</span>
            <input type="text" id="p3" maxlength="4" style="flex:1;" oninput="handleNumberOnly(this)" onblur="checkPhoneDuplicateServer()">
          </div>
          <div id="phoneError" class="field-error"></div><input type="hidden" name="phone" id="fullPhone">
        </div>

        <div class="input-group"><label class="required">ì£¼ì†Œ</label>
          <div class="split-box">
            <input type="text" id="postcode" placeholder="ìš°í¸ë²ˆí˜¸" style="flex:1;" readonly>
            <button type="button" class="btn-dark" onclick="execDaumPostcode()">ì£¼ì†Œ ê²€ìƒ‰</button>
          </div>
          <div style="margin-top: 8px;"><input type="text" id="roadAddress" placeholder="ë„ë¡œëª…/ì§€ë²ˆ ì£¼ì†Œ" readonly></div>
          <div style="margin-top: 8px;"><input type="text" id="detailAddress" placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥" required></div>
          <input type="hidden" name="address" id="fullAddress">
        </div>

        <div class="input-group"><label class="required">ì´ë©”ì¼ ì£¼ì†Œ</label>
          <div class="split-box">
            <input type="email" id="email" name="email" placeholder="example@email.com" style="flex:1;">
            
            <button type="button" class="btn-edit" onclick="enableEmailEdit()" id="btnEmailEdit">ìˆ˜ì •</button>
            <button type="button" class="btn-dark" onclick="reqEmailAuth()" id="btnEmailReq">ì¸ì¦</button>
          </div>
          <div id="authBox" style="display: none; align-items: center; gap: 8px; margin-top:8px;">
            <input type="text" id="authCode" placeholder="ì¸ì¦ë²ˆí˜¸ 6ìë¦¬" maxlength="6" style="flex:1;" oninput="handleAuthCodeInput()">
            <span id="timer" style="font-size:12px; color:red; font-weight:bold; min-width:40px; text-align:center;">05:00</span>
          </div>
          <div id="authSuccessMsg" style="display:none; color:green; font-size:12px; margin-top:4px; font-weight:bold;">ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</div>
          <div id="emailError" class="field-error"></div><input type="hidden" id="isEmailVerified" value="false">
        </div>

        <div class="input-group"><label class="required">ì¶œìê¸ˆ ì•½ì • <span style="font-size:11px; font-weight:normal; color:#888;">(10ë§Œì› ì´ìƒ, 1ë§Œì› ë‹¨ìœ„)</span></label>
          <input type="number" id="money" name="money" placeholder="ìˆ«ìë§Œ ì…ë ¥ (ì˜ˆ: 100000)" min="100000" step="10000" oninput="updateMoneyHint()" required>
          <div id="moneyHint" style="margin-top:4px; font-size:12px; color:#666;"></div>
        </div>

        <div class="input-group">
          <label>ì¶”ì²œì¸ <span style="font-size:11px; font-weight:normal; color:#888;">(ì„ íƒì‚¬í•­)</span></label>
          <input type="text" id="recommender" name="recommender" placeholder="ì¶”ì²œì¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
        </div>

        <div class="bank-section">
          <h3>ğŸ’° ë°°ë‹¹ê¸ˆ ì…ê¸ˆ ê³„ì¢Œ</h3>
          <p style="font-size:12px; color:#666; margin-bottom:15px;">ë°˜ë“œì‹œ <b>ë³¸ì¸(ë‹¨ì²´) ëª…ì˜ì˜ ê³„ì¢Œ</b>ë¥¼ ì ì–´ì£¼ì‹œê¸¸ ë°”ëë‹ˆë‹¤.</p>
          <div class="input-group"><label class="required">ì€í–‰ëª…</label>
              <select name="bankName" id="bankName" required>
                <option value="" disabled selected>ì€í–‰ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="ë†í˜‘">ë†í˜‘</option><option value="êµ­ë¯¼">êµ­ë¯¼</option><option value="ì‹ í•œ">ì‹ í•œ</option><option value="ìš°ë¦¬">ìš°ë¦¬</option>
                <option value="í•˜ë‚˜">í•˜ë‚˜</option><option value="ê¸°ì—…">ê¸°ì—…</option><option value="ì¹´ì¹´ì˜¤ë±…í¬">ì¹´ì¹´ì˜¤ë±…í¬</option><option value="í† ìŠ¤ë±…í¬">í† ìŠ¤ë±…í¬</option>
                <option value="ìƒˆë§ˆì„">ìƒˆë§ˆì„</option><option value="ì‹ í˜‘">ì‹ í˜‘</option><option value="ìš°ì²´êµ­">ìš°ì²´êµ­</option><option value="SCì œì¼">SCì œì¼</option><option value="ë¶€ì‚°">ë¶€ì‚°</option><option value="ëŒ€êµ¬">ëŒ€êµ¬</option><option value="ê´‘ì£¼">ê´‘ì£¼</option><option value="ì „ë¶">ì „ë¶</option><option value="ìˆ˜í˜‘">ìˆ˜í˜‘</option>
              </select>
          </div>
          <div class="input-group"><label class="required">ê³„ì¢Œë²ˆí˜¸ <span style="font-size:11px; color:#888;">(ìˆ«ìë§Œ ì…ë ¥ë¨)</span></label>
              <input type="text" id="accountNo" name="accountNo" placeholder="í•˜ì´í”ˆ(-) ì—†ì´ ì…ë ¥í•´ì£¼ì„¸ìš”" oninput="handleAccountInput(this)" onblur="checkAccountDuplicateServer()" required>
              <div id="accountError" class="field-error"></div>
          </div>
          <div class="input-group"><label class="required">ì˜ˆê¸ˆì£¼</label><input type="text" id="accountHolder" name="accountHolder" placeholder="ì´ë¦„ê³¼ ë‹¤ë¥¼ ê²½ìš° ìˆ˜ì •í•´ì£¼ì„¸ìš”" required></div>
        </div>

        <div class="agreement-box">
          <div class="check-item"><input type="checkbox" id="agree1" required> <span class="term-link" onclick="showTerm(event, 'privacy')">[í•„ìˆ˜] ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° í™œìš©ì— ë™ì˜í•©ë‹ˆë‹¤.</span></div>
          <div class="check-item"><input type="checkbox" id="agree2" required> <span class="term-link" onclick="showTerm(event, 'purpose')">[í•„ìˆ˜] ì¡°í•©ì˜ ì„¤ë¦½ëª©ì ì— ë™ì˜í•˜ê³  ì˜ë¬´ë¥¼ ë‹¤í•˜ê² ìŠµë‹ˆë‹¤.</span></div>
          
          <div class="check-item"><input type="checkbox" id="agree3" required> <span class="term-link" onclick="showTerm(event, 'risk')">[í•„ìˆ˜] ì¶œìê¸ˆ ì†ì‹¤ ìœ„í—˜ ë° í™˜ê¸‰ ì œí•œ ë“±ì— ë™ì˜í•©ë‹ˆë‹¤.</span></div>
        </div>

        <button type="submit" id="btnSubmit">ê°€ì… ì‹ ì²­í•˜ê¸°</button>
      </form>
    </div>

    <div id="popoverModal" class="modal" onclick="this.classList.remove('show'); this.style.display='none';">
      <div class="modal-content" onclick="event.stopPropagation()">
        <div style="font-size:16px; font-weight:bold; margin-bottom:10px; padding-bottom:10px; border-bottom:1px solid #eee;" id="popoverTitle">ì•½ê´€ ë‚´ìš©</div>
        <div class="alert-text" id="popoverText"></div>
        <div style="text-align:right; margin-top:15px;"><button type="button" class="btn-dark" style="height:36px;" onclick="document.getElementById('popoverModal').classList.remove('show'); document.getElementById('popoverModal').style.display='none';">ë‹«ê¸°</button></div>
        <div class="modal-arrow" id="popoverArrow"></div>
      </div>
    </div>

    <div id="centerModal" class="center-modal">
       <div class="modal-content">
          <div id="centerMsg" style="margin-bottom:20px; white-space:pre-wrap; font-size:15px; color:#333;"></div>
          <button type="button" style="background:#4e8cff; color:white; border:none; padding:12px; width:100%; border-radius:6px; font-weight:bold; cursor:pointer;" onclick="document.getElementById('centerModal').style.display='none'">í™•ì¸</button>
       </div>
    </div>
    
    <div id="confirmModal" class="center-modal" style="z-index: 100000;">
       <div class="modal-content">
          <div id="confirmMsg" style="margin-bottom:20px; white-space:pre-wrap; font-size:15px; color:#333;"></div>
          <div style="display:flex; gap:10px;">
             <button id="btnConfirmCancel" type="button" style="flex:1; background:#f1f3f4; color:#333; border:none; padding:12px; border-radius:6px; font-weight:bold; cursor:pointer;">ì·¨ì†Œ</button>
             <button id="btnConfirmOk" type="button" style="flex:1; background:#4e8cff; color:white; border:none; padding:12px; border-radius:6px; font-weight:bold; cursor:pointer;">í™•ì¸</button>
          </div>
       </div>
    </div>
    
    <div id="successModal" class="center-modal">
      <div class="modal-content">
        <div style="font-size:40px; margin-bottom:10px;">ğŸ‰</div>
        <h3 style="margin:0 0 10px 0;">ê°€ì… ì‹ ì²­ ì™„ë£Œ</h3>
        <p style="color:#666; font-size:14px;">ì‹ ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì¶œìê¸ˆ ì…ê¸ˆ ê³„ì¢ŒëŠ” ğŸ¦ ì‹ í˜‘ 131-022-855516 (ì˜ˆê¸ˆì£¼: ìš©ì¸ëª¨ë‘ì˜í–‡ë¹›í˜‘ë™ì¡°í•©)ì…ë‹ˆë‹¤.</p>
        <div class="kakao-box"><a href="https://invite.kakao.com/tc/cLtR3LGLQX" target="_blank" class="kakao-link-btn">ğŸ“¢ ì¹´ì¹´ì˜¤í†¡ íŒ€ì±„íŒ…ë°© ì°¸ì—¬í•˜ê¸°</a></div>
        <button class="btn-dark" style="width:100%; margin-top:20px;" onclick="location.reload()">ë‹«ê¸°</button>
      </div>
    </div>

    <script>
      // âš ï¸ ë°°í¬ ì£¼ì†Œ (Main.gs URLë¡œ ë³€ê²½ í•„ìš”)
      const API_URL = "https://script.google.com/macros/s/AKfycbyB4YxiojN5ZsY3NDRxa6-LTBL7y8Ae_h182lm1Czl0567WGzEXhGP-RRHWXZdIkWXi/exec";

      async function callApi(action, payload) {
        try {
          const response = await fetch(API_URL, {
            method: "POST",
            redirect: "follow",
            headers: { "Content-Type": "text/plain;charset=utf-8" },
            body: JSON.stringify(Object.assign({ action: action }, payload))
          });
          return await response.json();
        } catch (error) {
          console.error("API Error:", error);
          throw new Error("ì„œë²„ í†µì‹  ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }
      }

      // [ìˆ˜ì •] ì•½ê´€ ë°ì´í„°ì— 'risk' í•­ëª© ì¶”ê°€ë¨
      var termsData = {
        privacy: { title: "ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° í™œìš© ë™ì˜", content: "ë³¸ì¸ì€ã€Œê°œì¸ì •ë³´ë³´í˜¸ë²•ã€ì œ15ì¡°(ìˆ˜ì§‘Â·ì´ìš©Â·ì œê³µ) ë° ì œ17ì¡°(ê°œì¸ì •ë³´ì˜ ì œê³µ) ì œ1í•­ ì œ1í˜¸ì— ë”°ë¼ ê·€ ê¸°ê´€ì´ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘Â·ì´ìš©Â·ì œê³µ í•˜ëŠ” ê²ƒì— ëŒ€í•˜ì—¬ ë™ì˜í•©ë‹ˆë‹¤.\n\n1. ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘ ì´ìš© ëª©ì : (ê°€ì¹­)ìš©ì¸ëª¨ë‘ì˜í–‡ë¹›í˜‘ë™ì¡°í•©ì˜ ì„¤ë¦½ ë° ë°°ë‹¹ê¸ˆ ì§€ê¸‰\n2. ìˆ˜ì§‘í•˜ëŠ” ê°œì¸ì •ë³´ì˜ í•­ëª© : ì´ë¦„, íœ´ëŒ€í°ë²ˆí˜¸, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ì£¼ì†Œ, ì´ë©”ì¼ ì£¼ì†Œ\n3. ê°œì¸ì •ë³´ì˜ ë³´ìœ  ë° ì´ìš© ê¸°ê°„: ê°œì¸ì •ë³´ì˜ ìˆ˜ì§‘Â·ì´ìš© ëª©ì  ë‹¬ì„±ì‹œê¹Œì§€, ë˜ëŠ” ì¡°í•©ì›ì´ ìì‹ ì˜ ê°œì¸ì •ë³´ì œê³µì˜ ë™ì˜ë¥¼ ì² íšŒí•œ ë•Œ. ë‹¨, ê´€ë ¨ ë²•ë ¹ì˜ ê·œì •ì— ì˜í•˜ì—¬ ê°œì¸ì •ë³´ë¥¼ ë³´ìœ í•  í•„ìš”ê°€ ìˆëŠ” ê²½ìš°, í•´ë‹¹ ë²•ë ¹ì—ì„œ ì •í•œ ê¸°ê°„ê¹Œì§€.\n\n* ìˆ˜ì§‘ëœ ê³ ìœ ì‹ë³„ì •ë³´(ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸)ëŠ” ì•”í˜¸í™”ë˜ì–´ ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤." },
        purpose: { title: "ì¡°í•©ì˜ ì„¤ë¦½ëª©ì  ë™ì˜", content: "<b>ì œ2ì¡°(ëª©ì )</b> ìš©ì¸ëª¨ë‘ì˜í–‡ë¹›í˜‘ë™ì¡°í•©(ì´í•˜ â€˜ì¡°í•©â€™ì´ë¼ í•œë‹¤)ì€ ìì£¼ì Â·ìë¦½ì Â·ìì¹˜ì ì¸ í˜‘ë™ì¡°í•© í™œë™ì„ í†µí•˜ì—¬ ì‹œë¯¼ì°¸ì—¬í˜• íƒœì–‘ê´‘ ë°œì „ì†Œë¥¼ ì„¤ë¦½Â·ìš´ì˜í•˜ê³ , í–‡ë¹›ì„ ë‹®ì•„ ëª¨ë“  ìƒëª…ì´ ê³µí‰í•œ ì‚¶ì„ ëˆ„ë¦´ ìˆ˜ ìˆë„ë¡ ì§€ì—­ê³µë™ì²´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ìƒí˜¸ë¶€ì¡°ì˜ ê°€ì¹˜ë¥¼ ì‹¤ì²œí•¨ìœ¼ë¡œì¨ ê¸°í›„ìœ„ê¸°ì— ëŒ€ì‘í•˜ê³ , ì—ë„ˆì§€ ì „í™˜ì„ ì‹¤í˜„í•˜ë©°, ì·¨ì•½ê³„ì¸µì—ê²Œ ì¼ìë¦¬ì™€ ì‚¬íšŒì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ë“± ì§€ì—­ì‚¬íšŒì— ê¸°ì—¬í•¨ì„ ëª©ì ìœ¼ë¡œ í•œë‹¤." },
        
        // [NEW] ì¶œìê¸ˆ ìœ„í—˜ ê³ ì§€ ë‚´ìš© ì¶”ê°€
        risk: { 
          title: "ì¶œìê¸ˆ ë° ë°°ë‹¹ ê´€ë ¨ ì¤‘ìš” ê³ ì§€", 
          content: "1. ì¶œìê¸ˆì€ ì˜ˆê¸ˆìë³´í˜¸ ëŒ€ìƒì´ ì•„ë‹ˆë©° ì›ê¸ˆ ì†ì‹¤ ê°€ëŠ¥ì„±ì´ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\n\n2. íƒˆí‡´(ë˜ëŠ” ì œëª…) ì „ ì¤‘ë„ í™˜ê¸‰ì´ ì œí•œë  ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\n\n3. í™˜ê¸‰ì€ ê²°ì‚° ë° ì´íšŒ ìŠ¹ì¸ ë“± ì ˆì°¨ í›„ ê°€ëŠ¥í•˜ë©° ì§€ì—°Â·ë¶„í•  ì§€ê¸‰ë  ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\n\n4. ë°°ë‹¹ì€ ì´íšŒ ì˜ê²° ë° ê²½ì˜ì„±ê³¼ì— ë”°ë¼ ê²°ì •ë˜ë©° ì—†ì„ ìˆ˜ ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤." 
        }
      };

      var authTimer = null; var btnCooldownTimer = null; var originalEmail = "";

      function handleNumberOnly(el) { el.value = el.value.replace(/[^0-9]/g, ''); }
      function autoMove(c,n,l) { if(c.value.length>=l) document.getElementById(n).focus(); }

      function checkAgeLimit() {
        var rrn1 = document.getElementById('rrn1').value; var rrn2 = document.getElementById('rrn2').value; 
        if (rrn1.length === 6 && rrn2.length >= 1) {
          var birthYearPrefix; var firstDigit = parseInt(rrn2.charAt(0));
          if (firstDigit === 1 || firstDigit === 2 || firstDigit === 5 || firstDigit === 6) birthYearPrefix = 19;
          else if (firstDigit === 3 || firstDigit === 4 || firstDigit === 7 || firstDigit === 8) birthYearPrefix = 20;
          else return;
          var birthYear = parseInt(birthYearPrefix + rrn1.substring(0, 2));
          var birthMonth = parseInt(rrn1.substring(2, 4)) - 1; var birthDay = parseInt(rrn1.substring(4, 6));
          var today = new Date(); var birthDate = new Date(birthYear, birthMonth, birthDay);
          var age = today.getFullYear() - birthDate.getFullYear();
          var m = today.getMonth() - birthDate.getMonth();
          if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) age--;

          if (age < 19) {
            showAlert("â›” ë¯¸ì„±ë…„ì ê°€ì… ì œí•œ\n\n[ë¯¼ë²• ì œ5ì¡° 1í•­]ì— ë”°ë¼ ë¯¸ì„±ë…„ìì˜ ë²•ë¥ í–‰ìœ„ì—ëŠ” ë²•ì •ëŒ€ë¦¬ì¸ì˜ ë™ì˜ê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.");
            document.getElementById('rrn1').value = ""; document.getElementById('rrn2').value = ""; document.getElementById('rrn1').focus();
          }
        }
      }

      function validateAndCheckBizNo() {
         var b1 = document.getElementById('biz1').value; var b2 = document.getElementById('biz2').value; var b3 = document.getElementById('biz3').value;
         var bizNo = b1 + b2 + b3;
         var errorDiv = document.getElementById('orgNoError');
         if(bizNo.length !== 10) { if(bizNo.length > 0) errorDiv.textContent = "ì‚¬ì—…ì(ê³ ìœ )ë²ˆí˜¸ 10ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."; return; }
         var checkID = [1, 3, 7, 1, 3, 7, 1, 3, 5]; var i, chkSum=0, c2, remander; 
         for (i=0; i<=7; i++) chkSum += checkID[i] * bizNo.charAt(i); 
         c2 = "0" + (checkID[8] * bizNo.charAt(8)); c2 = c2.substring(c2.length - 2); 
         chkSum += Math.floor(c2.charAt(0)) + Math.floor(c2.charAt(1)); 
         remander = (10 - (chkSum % 10)) % 10 ; 
         if (Math.floor(bizNo.charAt(9)) === remander) {
            errorDiv.textContent = ""; document.getElementById('orgNo').value = b1 + "-" + b2 + "-" + b3;
            checkOrgNoDuplicateServer(bizNo); 
         } else { errorDiv.textContent = "ìœ íš¨í•˜ì§€ ì•Šì€ ì‚¬ì—…ì(ê³ ìœ )ë²ˆí˜¸ì…ë‹ˆë‹¤."; document.getElementById('orgNo').value = ""; }
      }
      function checkOrgNoDuplicateServer(valStr) {
         if(!valStr) return;
         var formatted = valStr.substring(0,3)+"-"+valStr.substring(3,5)+"-"+valStr.substring(5);
         callApi('checkDuplicate', { type: 'orgNo', value: formatted })
           .then(res => { if(res.result === 'DUPLICATE') document.getElementById('orgNoError').textContent='ì´ë¯¸ ê°€ì…ëœ ë²ˆí˜¸ì…ë‹ˆë‹¤.'; })
           .catch(err => console.error(err));
      }

      function showTerm(e, type) {
        e.preventDefault(); e.stopPropagation();
        var modal = document.getElementById('popoverModal');
        document.getElementById('popoverTitle').textContent = termsData[type].title;
        document.getElementById('popoverText').innerHTML = termsData[type].content.replace(/\n/g, '<br>');
        if(window.innerWidth <= 600) { modal.style.display = 'flex'; setTimeout(()=>modal.classList.add('show'), 10); }
        else {
          modal.classList.remove('show'); modal.style.display = 'block'; 
          var content = modal.querySelector('.modal-content'); var arrow = document.getElementById('popoverArrow');
          var clickY = e.pageY; var clickX = e.pageX; var topPos = clickY - content.offsetHeight - 15;
          if (topPos < window.scrollY + 10) { topPos = clickY + 25; arrow.style.top = "-8px"; arrow.style.bottom = "auto"; arrow.style.transform = "rotate(225deg)"; }
          else { arrow.style.bottom = "-8px"; arrow.style.top = "auto"; arrow.style.transform = "rotate(45deg)"; }
          content.style.position = 'absolute'; content.style.top = topPos + 'px'; content.style.left = Math.min(Math.max(10, clickX - 20), window.innerWidth - 320) + 'px';
        }
      }
      
      // [í—¬í¼] ì•Œë¦¼ ëª¨ë‹¬ ë„ìš°ê¸° í•¨ìˆ˜
      function showAlert(msg) { 
          document.getElementById('centerMsg').innerHTML=msg.replace(/\n/g, '<br>'); 
          document.getElementById('centerModal').style.display='flex'; 
      }
      
      // [ì‹ ê·œ í—¬í¼] í™•ì¸(Confirm) ëª¨ë‹¬ ë„ìš°ê¸° í•¨ìˆ˜
      function showConfirm(msg, yesCallback) {
          document.getElementById('confirmMsg').innerHTML = msg.replace(/\n/g, '<br>');
          var modal = document.getElementById('confirmModal');
          
          document.getElementById('btnConfirmCancel').onclick = function() {
              modal.style.display = 'none';
          };
          
          document.getElementById('btnConfirmOk').onclick = function() {
              modal.style.display = 'none';
              if(yesCallback) yesCallback();
          };
          
          modal.style.display = 'flex';
      }
      
      function toggleType(t) {
        var isIndividual = (t === 'ê°œì¸'); var isOrg = (t === 'ë‹¨ì²´');
        document.getElementById('individualField').style.display = isIndividual ? 'block' : 'none';
        document.getElementById('orgField').style.display = isOrg ? 'block' : 'none';
        document.getElementById('userName').required = isIndividual; document.getElementById('rrn1').required = isIndividual; document.getElementById('rrn2').required = isIndividual;
        var orgNameInput = document.getElementById('orgName'); if(orgNameInput) orgNameInput.required = isOrg;
        syncAccountHolder();
      }
      function syncAccountHolder() {
        var t = document.querySelector('input[name="userType"]:checked').value;
        var val = (t==='ê°œì¸') ? document.getElementById('userName').value : document.getElementById('orgName').value;
        document.getElementById('accountHolder').value = val;
      }
      function handleAccountInput(el) { el.value = el.value.replace(/[^0-9]/g,''); }
      function checkAccountDuplicateServer() {
        var val = document.getElementById('accountNo').value; if(!val) return;
        callApi('checkDuplicate', { type: 'account', value: val })
          .then(res => { if(res.result === 'DUPLICATE') document.getElementById('accountError').textContent='ì´ë¯¸ ë“±ë¡ëœ ê³„ì¢Œì…ë‹ˆë‹¤.'; })
          .catch(err => console.error(err));
      }
      function checkRRNOnBlur() { 
         var rrn = document.getElementById('rrn1').value + document.getElementById('rrn2').value;
         if(rrn.length >= 7) {
           callApi('checkDuplicate', { type: 'rrn', value: rrn })
             .then(res => { if(res.result === 'DUPLICATE') document.getElementById('rrnError').textContent='ì´ë¯¸ ê°€ì…ëœ ë²ˆí˜¸ì…ë‹ˆë‹¤.'; })
             .catch(err => console.error(err));
         }
      }
      function checkPhoneDuplicateServer() {
         var userType = document.querySelector('input[name="userType"]:checked').value; if (userType === 'ë‹¨ì²´') return;
         var p = document.getElementById('p1').value+"-"+document.getElementById('p2').value+"-"+document.getElementById('p3').value;
         callApi('checkDuplicate', { type: 'phone', value: p })
           .then(res => { if(res.result === 'DUPLICATE') document.getElementById('phoneError').textContent='ì´ë¯¸ ê°€ì…ëœ ì—°ë½ì²˜ì…ë‹ˆë‹¤.'; })
           .catch(err => console.error(err));
      }

      function startTimer(duration, display) {
        var timer = duration, minutes, seconds; if(authTimer) clearInterval(authTimer);
        authTimer = setInterval(function () {
          minutes = parseInt(timer / 60, 10); seconds = parseInt(timer % 60, 10);
          minutes = minutes < 10 ? "0" + minutes : minutes; seconds = seconds < 10 ? "0" + seconds : seconds;
          display.textContent = minutes + ":" + seconds;
          if (--timer < 0) { 
              clearInterval(authTimer); 
              display.textContent = "ë§Œë£Œ"; 
              showAlert("â° ì¸ì¦ ì‹œê°„ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\në‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."); 
              document.getElementById('authCode').value = ''; 
              document.getElementById('authBox').style.display = 'none'; 
          }
        }, 1000);
      }
      function startButtonCooldown(duration, btn) {
        var timer = duration, minutes, seconds; if (btnCooldownTimer) clearInterval(btnCooldownTimer);
        btn.disabled = true; 
        btnCooldownTimer = setInterval(function () {
          minutes = parseInt(timer / 60, 10); seconds = parseInt(timer % 60, 10);
          minutes = minutes < 10 ? "0" + minutes : minutes; seconds = seconds < 10 ? "0" + seconds : seconds;
          btn.textContent = "ì¬ë°œì†¡ (" + minutes + ":" + seconds + ")";
          if (--timer < 0) { clearInterval(btnCooldownTimer); btn.textContent = "ì¸ì¦ë²ˆí˜¸ ì¬ë°œì†¡"; btn.disabled = false; }
        }, 1000);
      }

      function reqEmailAuth() {
        var em = document.getElementById('email').value; var btn = document.getElementById('btnEmailReq'); 
        if(!em) return showAlert('ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
        
        btn.disabled = true; btn.textContent = "ë°œì†¡ ì¤‘...";
        callApi('sendEmailAuth', { email: em, userType: document.querySelector('input[name="userType"]:checked').value })
          .then(res => {
            if(res.result === 'DUPLICATE') { 
                showAlert('ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.'); 
                btn.disabled = false; btn.textContent = "ì¸ì¦"; 
            }
            else if(res.result === 'SENT') { 
               showAlert('ğŸ“§ ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.\në©”ì¼í•¨ì„ í™•ì¸í•´ì£¼ì„¸ìš”.'); 
               document.getElementById('authBox').style.display='flex'; 
               document.getElementById('authCode').focus(); startTimer(300, document.querySelector('#timer')); startButtonCooldown(180, btn);
            } else { 
               showAlert('ì˜¤ë¥˜: ' + res.message); 
               btn.disabled = false; btn.textContent = "ì¸ì¦"; 
            }
          })
          .catch(err => { 
              showAlert("ì„œë²„ í†µì‹  ì˜¤ë¥˜: " + err.message); 
              btn.disabled = false; btn.textContent = "ì¸ì¦"; 
          });
      }
      function handleAuthCodeInput() {
         var el = document.getElementById('authCode'); var val = el.value;
         if(val.length === 6) {
           el.readOnly = true; el.style.backgroundColor = "#e8f0fe"; 
           callApi('verifyEmailAuth', { email: document.getElementById('email').value, code: val })
             .then(res => {
                if(res.result === 'OK') { 
                   document.getElementById('emailError').textContent = ''; document.getElementById('authSuccessMsg').style.display='block'; 
                   document.getElementById('authBox').style.display='none'; document.getElementById('isEmailVerified').value='true'; 
                   document.getElementById('btnEmailReq').disabled = true; 
                   if(authTimer) clearInterval(authTimer); if(btnCooldownTimer) clearInterval(btnCooldownTimer); 
                   document.getElementById('btnEmailReq').textContent = "ì¸ì¦ì™„ë£Œ";
                   originalEmail = document.getElementById('email').value;
                } else {
                   el.readOnly = false; el.style.backgroundColor = "#fff"; el.focus(); 
                   if (res.result === 'BLOCK') { 
                       document.getElementById('emailError').textContent = 'âŒ 5íšŒ ì˜¤ë¥˜: 10ë¶„ê°„ ì œí•œ'; 
                       showAlert("ğŸš« ë³´ì•ˆ ê²½ê³ \nì¸ì¦ ì‹œë„ê°€ ë„ˆë¬´ ë§ì•„ 10ë¶„ê°„ ì œí•œë©ë‹ˆë‹¤."); 
                   } 
                   else { document.getElementById('emailError').textContent = 'ë²ˆí˜¸ê°€ í‹€ë¦½ë‹ˆë‹¤.'; }
                }
             })
             .catch(err => console.error(err));
         }
      }

      function updateMoneyHint() {
         var v = document.getElementById('money').value;
         document.getElementById('moneyHint').textContent = (v>=100000 && v%10000===0) ? parseInt(v).toLocaleString()+'ì›' : '10ë§Œì› ì´ìƒ, 1ë§Œì› ë‹¨ìœ„';
      }

      function handleFormSubmit(e, form) {
        e.preventDefault();
        
        var userType = document.querySelector('input[name="userType"]:checked').value;
        if (userType === 'ê°œì¸') {
            var name = document.getElementById('userName').value.trim();
            if (name.length < 2) return showAlert('ì´ë¦„ì„ 2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        } else {
            var org = document.getElementById('orgName').value.trim();
            if (org.length < 2) return showAlert('ë‹¨ì²´ëª…ì„ 2ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            var orgNo = document.getElementById('orgNo').value;
            if(!orgNo || orgNo.length < 10) return showAlert('ì‚¬ì—…ì(ê³ ìœ )ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        }

        var p2 = document.getElementById('p2').value; var p3 = document.getElementById('p3').value;
        if(p2.length < 3 || p3.length < 4) return showAlert('ì „í™”ë²ˆí˜¸ë¥¼ ì •í™•íˆ ì…ë ¥í•´ì£¼ì„¸ìš”.');

        // ì´ë©”ì¼ ê²€ì¦
        var currentEmail = document.getElementById('email').value;
        var isVerified = document.getElementById('isEmailVerified').value === 'true';
        if (originalEmail && currentEmail === originalEmail) { } // í†µê³¼
        else { if (!isVerified) return showAlert('ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.'); }

        if(document.getElementById('accountError').textContent || document.getElementById('rrnError').textContent || document.getElementById('orgNoError').textContent) return showAlert('ì…ë ¥ ì˜¤ë¥˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
        
        document.getElementById('fullPhone').value = document.getElementById('p1').value+"-"+document.getElementById('p2').value+"-"+document.getElementById('p3').value;
        document.getElementById('fullAddress').value = "("+document.getElementById('postcode').value+") "+document.getElementById('roadAddress').value+" "+document.getElementById('detailAddress').value;

        var formData = new FormData(form);
        var formObject = {};
        formData.forEach((value, key) => formObject[key] = value);

        document.getElementById('btnSubmit').disabled=true; document.getElementById('btnSubmit').textContent='ì²˜ë¦¬ì¤‘...';

        callApi('signup', { data: formObject })
          .then(res => {
             if (res.success || res.result === 'SUCCESS') { document.getElementById('successModal').style.display='flex'; } 
             else { showAlert("ì˜¤ë¥˜: " + res.message); document.getElementById('btnSubmit').disabled=false; document.getElementById('btnSubmit').textContent='ê°€ì… ì‹ ì²­í•˜ê¸°'; }
          })
          .catch(err => {
             showAlert("ì„œë²„ í†µì‹  ì˜¤ë¥˜: " + err.message);
             document.getElementById('btnSubmit').disabled=false; document.getElementById('btnSubmit').textContent='ê°€ì… ì‹ ì²­í•˜ê¸°';
          });
      }

      function execDaumPostcode() {
        new daum.Postcode({
          oncomplete: function(data) {
             var addr = data.roadAddress; if(data.buildingName) addr += " ("+data.buildingName+")";
             document.getElementById('postcode').value = data.zonecode; document.getElementById('roadAddress').value = addr;
             document.getElementById('layer').style.display = 'none';
          }, width:'100%', height:'100%'
        }).embed(document.getElementById('layer'));
        document.getElementById('layer').style.display = 'block';
      }
      function closeDaumPostcode() { document.getElementById('layer').style.display='none'; }

      // [ìˆ˜ì •] confirm() ëŒ€ì‹  showConfirm() ëª¨ë‹¬ ì‚¬ìš©
      function enableEmailEdit() {
          showConfirm("ì´ë©”ì¼ì„ ìˆ˜ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nìˆ˜ì • ì‹œ ì¸ì¦ì„ ë‹¤ì‹œ ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤.", function() {
              var emailInput = document.getElementById('email');
              emailInput.readOnly = false; emailInput.style.backgroundColor = "#fff"; emailInput.focus();
              document.getElementById('btnEmailEdit').style.display = 'none';
              document.getElementById('btnEmailReq').style.display = 'block';
              document.getElementById('isEmailVerified').value = 'false';
              document.getElementById('authSuccessMsg').style.display = 'none';
              document.getElementById('btnEmailReq').textContent = "ì¸ì¦";
              document.getElementById('btnEmailReq').disabled = false;
          });
      }

// [SNS ì—°ë™ ë° ë°ì´í„° ìë™ ì±„ì›€ ë¡œì§]
function handleSnsParams() {
    const params = new URLSearchParams(window.location.search);
    
    // 1. SNS ë¡œê·¸ì¸ì´ ì•„ë‹ˆë©´ ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•Šê³  ì¢…ë£Œ
    if (params.get('isSns') !== 'true') return;

    console.log("SNS Login Detected");

    const form = document.getElementById('joinForm');

    // 2. íˆë“  í•„ë“œ ìƒì„± (snsType, snsIdë¥¼ ì„œë²„ë¡œ ë„˜ê¸°ê¸° ìœ„í•¨)
    const addHidden = (name, val) => {
        let input = document.createElement('input');
        input.type = 'hidden';
        input.name = name;
        input.value = val;
        form.appendChild(input);
    };
    addHidden('snsType', params.get('snsType'));
    addHidden('snsId', params.get('snsId'));

    // 3. ë‹¨ì²´ ê°€ì… ë§‰ê¸° (ê°œì¸ íšŒì›ìœ¼ë¡œ ê°•ì œ ê³ ì •)
    // ë‘ ë²ˆì§¸ ë¼ë””ì˜¤ ë²„íŠ¼(ë‹¨ì²´)ì„ ë¹„í™œì„±í™”í•˜ê³  íë¦¬ê²Œ ì²˜ë¦¬
    const radioInputs = document.querySelectorAll('input[name="userType"]');
    const radioLabels = document.querySelectorAll('.radio-label');
    if (radioInputs[1]) radioInputs[1].disabled = true;
    if (radioLabels[1]) {
        radioLabels[1].style.opacity = "0.5";
        radioLabels[1].title = "SNS ê°„í¸ ê°€ì…ì€ ê°œì¸ íšŒì›ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.";
    }

    // 4. ì´ë¦„ ì±„ìš°ê¸°
    const name = params.get('name');
    if (name && name !== 'undefined') {
        document.getElementById('userName').value = name;
        syncAccountHolder(); // ì˜ˆê¸ˆì£¼ ì…ë ¥ì¹¸ë„ ê°™ì´ ë™ê¸°í™”
    }

    // 5. ì´ë©”ì¼ ì±„ìš°ê¸° & UI ë³€ê²½
    const email = params.get('email');
    if (email && email !== 'undefined') {
        const emailInput = document.getElementById('email');
        emailInput.value = email;
        
        // ìˆ˜ì • ë¶ˆê°€ëŠ¥í•˜ê²Œ ë§‰ê³  íšŒìƒ‰ ë°°ê²½ ì²˜ë¦¬
        emailInput.readOnly = true;
        emailInput.style.backgroundColor = "#e8f0fe";
        
        // [ì¤‘ìš”] ì›ë³¸ ì´ë©”ì¼ ì €ì¥ (ë‚˜ì¤‘ì— ìˆ˜ì • ì—¬ë¶€ íŒë‹¨ìš©)
        originalEmail = email;

        // ë²„íŠ¼ êµì²´: [ì¸ì¦] ìˆ¨ê¹€ -> [ìˆ˜ì •] ë³´ì„
        document.getElementById('btnEmailReq').style.display = 'none';
        document.getElementById('btnEmailEdit').style.display = 'block';

        // ì¸ì¦ ì™„ë£Œ ìƒíƒœë¡œ ì„¤ì •
        document.getElementById('isEmailVerified').value = 'true';
        
        // ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€
        const authBox = document.getElementById('authBox');
        authBox.insertAdjacentHTML('afterend', '<div style="color:blue; font-size:12px; margin-top:5px; font-weight:bold;">âœ… SNS ê³„ì •ìœ¼ë¡œ ì¸ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.</div>');
    }

    // 6. ì „í™”ë²ˆí˜¸ ì±„ìš°ê¸° & ì ê¸ˆ (í•˜ì´í”ˆ ìë™ ì²˜ë¦¬ ì¶”ê°€)
    let phone = params.get('phone');
    if (phone && phone !== 'undefined') {
        // [ìˆ˜ì •ë¨] í•˜ì´í”ˆ(-)ì´ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ë„£ì–´ì£¼ëŠ” ì½”ë“œ ì¶”ê°€
        if (!phone.includes('-') && phone.length >= 10) {
            phone = phone.replace(/^(\d{2,3})(\d{3,4})(\d{4})$/, `$1-$2-$3`);
        }

        // ì´ì œ í•˜ì´í”ˆì´ ìˆë“  ì—†ë“  ì²˜ë¦¬ ê°€ëŠ¥
        if (phone.includes('-')) {
            const parts = phone.split('-');
            if (parts.length === 3) {
                const p1 = document.getElementById('p1');
                const p2 = document.getElementById('p2');
                const p3 = document.getElementById('p3');

                p1.value = parts[0];
                p2.value = parts[1];
                p3.value = parts[2];

                // ì „í™”ë²ˆí˜¸ ìˆ˜ì • ì ˆëŒ€ ë¶ˆê°€ (íšŒìƒ‰ ì²˜ë¦¬)
                p1.readOnly = true; p1.style.backgroundColor = "#e8f0fe";
                p2.readOnly = true; p2.style.backgroundColor = "#e8f0fe";
                p3.readOnly = true; p3.style.backgroundColor = "#e8f0fe";
                
                syncAccountHolder();
            }
        }
    } else {
        // ì „í™”ë²ˆí˜¸ê°€ ì—†ëŠ” ê²½ìš° í¬ì»¤ìŠ¤ë§Œ ì´ë™
        document.getElementById('p2').placeholder = "í•„ìˆ˜";
        document.getElementById('p3').placeholder = "ì…ë ¥";
        setTimeout(() => document.getElementById('p2').focus(), 500);
    }

    // 7. [í•µì‹¬] ì£¼ì†Œì°½ ì²­ì†Œ (ìƒˆë¡œê³ ì¹¨ ì‹œ ì—ëŸ¬ ë°©ì§€)
    // URLì—ì„œ ?isSns=... ë¶€ë¶„ì„ ì‚­ì œí•˜ì—¬, ì‚¬ìš©ìê°€ ìƒˆë¡œê³ ì¹¨ í•´ë„ SNS í† í° ì¬ì‚¬ìš© ì—ëŸ¬ê°€ ì•ˆ ë‚˜ê²Œ í•¨
    const cleanUrl = window.location.protocol + "//" + window.location.host + window.location.pathname;
    window.history.replaceState({ path: cleanUrl }, '', cleanUrl);
}
      // SignUp.html (ë˜ëŠ” ê°€ì… ë²„íŠ¼ì´ ìˆëŠ” í˜ì´ì§€)

function startKakaoSignup() {
    // 1. stateë¥¼ 'signup_'ìœ¼ë¡œ ì‹œì‘í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. (ì´ê²Œ í•µì‹¬!)
    var randomStr = Math.random().toString(36).substring(2, 15);
    var state = "signup_" + randomStr; 

    // 2. ì¹´ì¹´ì˜¤ ì¸ì¦ URL (ë¦¬ë‹¤ì´ë ‰íŠ¸ URIëŠ” ë¡œê·¸ì¸ ë•Œì™€ ë˜‘ê°™ì´ callback.html ì”ë‹ˆë‹¤)
    var kakaoUrl = "https://kauth.kakao.com/oauth/authorize" +
                    "?client_id=" + "22abc7108d7d6517e2abe1ddf382f842" + // í‚¤ ì§ì ‘ ì…ë ¥ ë˜ëŠ” ë³€ìˆ˜ ì‚¬ìš©
                    "&redirect_uri=" + encodeURIComponent("https://minho-kim.github.io/yongin-solar-web/callback.html") +
                    "&response_type=code" +
                    "&state=" + state;
    
    // 3. í˜„ì¬ ì°½ì—ì„œ ì´ë™ (ë˜ëŠ” íŒì—…)
    window.location.href = kakaoUrl; 
}
      function startNaverSignup() {
    // 1. ë„¤ì´ë²„ìš© State ìƒì„± (í•µì‹¬: signup_naver_ ì ‘ë‘ì–´)
    // callback.htmlì€ 'signup_'ìœ¼ë¡œ ì‹œì‘í•˜ê¸°ë§Œ í•˜ë©´ ë˜ë¯€ë¡œ, ì´ íŒ¨í„´ì„ ì“°ë©´
    // ê¹ƒí—ˆë¸Œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ì¸ì‹ë©ë‹ˆë‹¤! (ì²œì¬ì ì¸ ê¼¼ìˆ˜)
    var randomStr = Math.random().toString(36).substring(2, 15);
    var state = "signup_naver_" + randomStr; 
    
    // 2. Client ID ì„¤ì • (HTML ìƒë‹¨ ìƒìˆ˜ í™œìš© ê¶Œì¥)
    var NAVER_CLIENT_ID = "ë°œê¸‰ë°›ì€_ë„¤ì´ë²„_í´ë¼ì´ì–¸íŠ¸_ID"; 

    // 3. ì¸ì¦ URL ìƒì„±
    var naverUrl = "https://nid.naver.com/oauth2.0/authorize" +
                    "?response_type=code" +
                    "&client_id=" + NAVER_CLIENT_ID +
                    "&redirect_uri=" + encodeURIComponent("https://minho-kim.github.io/yongin-solar-web/callback.html") +
                    "&state=" + state;
    
    // 4. ì´ë™
    window.location.href = naverUrl;
}
      handleSnsParams();
    </script>
  </body>
</html>
